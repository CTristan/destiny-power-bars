(this["webpackJsonpdestiny-power-bars"]=this["webpackJsonpdestiny-power-bars"]||[]).push([[2],{10:function(e,t,r){e.exports={details:"PowerDetails_details__1vqno",detailsRow:"PowerDetails_detailsRow__20lfp",detailsLabel:"PowerDetails_detailsLabel__2dvVG",detailsInlineIcon:"PowerDetails_detailsInlineIcon__1Pqe3",detailsValue:"PowerDetails_detailsValue__3daTt",progressBar:"PowerDetails_progressBar__2-GA8",progressBarFill:"PowerDetails_progressBarFill__sl9C7",progressBarOverlay:"PowerDetails_progressBarOverlay__1c66l"}},11:function(e,t,r){e.exports={characterDisplayWrapper:"CharacterDisplay_characterDisplayWrapper__1IXlj",dragOverlay:"CharacterDisplay_dragOverlay__2UjDt",dragOver:"CharacterDisplay_dragOver__1FVZx",dragging:"CharacterDisplay_dragging__37e2z",characterDisplay:"CharacterDisplay_characterDisplay__20O9A",header:"CharacterDisplay_header__2fx5d",emblemBackground:"CharacterDisplay_emblemBackground__2pAjE",emblemSecondarySpecial:"CharacterDisplay_emblemSecondarySpecial__15-aM",emblemSecondaryOverlay:"CharacterDisplay_emblemSecondaryOverlay__3IJk5",name:"CharacterDisplay_name__2j8PA",power:"CharacterDisplay_power__1p583",title:"CharacterDisplay_title__G1RAx",withTitle:"CharacterDisplay_withTitle__2QVYI",hasRedacted:"CharacterDisplay_hasRedacted__1jsLE",headerOverlayBar:"CharacterDisplay_headerOverlayBar__2pT62",content:"CharacterDisplay_content__263Ab"}},12:function(e,t,r){e.exports={membershipSelect:"MembershipSelect_membershipSelect__3GbZz",logOut:"MembershipSelect_logOut__VQnEI",logOutIcon:"MembershipSelect_logOutIcon__DuROc",logOutText:"MembershipSelect_logOutText__1Js6Q",membership:"MembershipSelect_membership__3vKKK",membershipDisplayName:"MembershipSelect_membershipDisplayName__2jWVB",platform_xbox:"MembershipSelect_platform_xbox__1EgLN",platform_psn:"MembershipSelect_platform_psn__2ASN8",platform_steam:"MembershipSelect_platform_steam__3zG5m",platform_blizzard:"MembershipSelect_platform_blizzard__1zLDb",platform_stadia:"MembershipSelect_platform_stadia__2-ukT",crossSaveDisplayWrapper:"MembershipSelect_crossSaveDisplayWrapper__1AETV",crossSaveDisplay:"MembershipSelect_crossSaveDisplay__2ZNGP",crossSaveIcon:"MembershipSelect_crossSaveIcon__3jhZw",crossSaveMembershipIcon:"MembershipSelect_crossSaveMembershipIcon__1HLL-",crossSaveMembershipType_xbox:"MembershipSelect_crossSaveMembershipType_xbox__8gPas",crossSaveMembershipType_psn:"MembershipSelect_crossSaveMembershipType_psn__P61_o",crossSaveMembershipType_steam:"MembershipSelect_crossSaveMembershipType_steam__2roXt",crossSaveMembershipType_blizzard:"MembershipSelect_crossSaveMembershipType_blizzard__2qkhP",crossSaveMembershipType_stadia:"MembershipSelect_crossSaveMembershipType_stadia__2CnVB"}},14:function(e,t,r){e.exports={App:"App_App__15LM-",AppInner:"App_AppInner__2tVOm",top:"App_top__3N23O",loadingContainer:"App_loadingContainer__1Pa9s",charactersContainer:"App_charactersContainer__1RSU_",characters:"App_characters__1GhrS",loadingStatus:"App_loadingStatus__3QEhd",statusAuthError:"App_statusAuthError__3mdh6",header:"App_header__2L3DO",hardRefreshButton:"App_hardRefreshButton__1ALSQ",disabled:"App_disabled__yJtTF"}},16:function(e,t,r){e.exports={powerBars:"PowerBars_powerBars__33tbb",powerRange:"PowerBars_powerRange__te0OD",rangeLine:"PowerBars_rangeLine__3sXeP",powerLabel:"PowerBars_powerLabel__z9Lm2",indicator:"PowerBars_indicator__1UcsC"}},18:function(e,t,r){e.exports={characterLinks:"CharacterLinks_characterLinks__1TWEL",content:"CharacterLinks_content__2v01s",link:"CharacterLinks_link__zfRay",linkText:"CharacterLinks_linkText__3ZLGm",link_tag_dim:"CharacterLinks_link_tag_dim__3F49B",link_tag_braytech:"CharacterLinks_link_tag_braytech__34k9M",link_tag_destinysets:"CharacterLinks_link_tag_destinysets__13QtP",link_tag_d2checklist:"CharacterLinks_link_tag_d2checklist__3rg2p",link_tag_guardianstats:"CharacterLinks_link_tag_guardianstats__MnZrG",link_tag_raidreport:"CharacterLinks_link_tag_raidreport__2W1oW",link_tag_dungeonreport:"CharacterLinks_link_tag_dungeonreport__1rvUg",hide:"CharacterLinks_hide__2jGa_"}},19:function(e,t,r){e.exports={anchor:"LoadingSpinner_anchor__78Pnm",spinner:"LoadingSpinner_spinner__32tWn",spin:"LoadingSpinner_spin__3FVoi",loading:"LoadingSpinner_loading__3Y_gu",spinnerLarge:"LoadingSpinner_spinnerLarge__KooL0",spinnerLargeDouble:"LoadingSpinner_spinnerLargeDouble__pi4h9",spinnerSmall:"LoadingSpinner_spinnerSmall__27lWl",spinnerSmallDouble:"LoadingSpinner_spinnerSmallDouble__2FOGm",status:"LoadingSpinner_status__3sgCR"}},198:function(e,t,r){},199:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"default",(function(){return J}));var a={};r.r(a),r.d(a,"BungieSystemDisabledError",(function(){return K})),r.d(a,"bungieAuthedFetch",(function(){return Q})),r.d(a,"clearStoredManifest",(function(){return re})),r.d(a,"getManifest",(function(){return ne})),r.d(a,"getBasicProfile",(function(){return ae})),r.d(a,"getFullProfile",(function(){return ce})),r.d(a,"setItemLockState",(function(){return ie}));var c={};r.r(c),r.d(c,"hasManuallyAuthed",(function(){return je})),r.d(c,"getAuthUrl",(function(){return ve})),r.d(c,"manualStartAuth",(function(){return ge})),r.d(c,"getAccessToken",(function(){return Ae})),r.d(c,"hasValidAuth",(function(){return ke})),r.d(c,"getDestinyMemberships",(function(){return Ne})),r.d(c,"hasDestinyMemberships",(function(){return De})),r.d(c,"getSelectedDestinyMembership",(function(){return Te})),r.d(c,"hasSelectedDestinyMembership",(function(){return Ce})),r.d(c,"setSelectedDestinyMembership",(function(){return Pe})),r.d(c,"auth",(function(){return Re})),r.d(c,"logOut",(function(){return Me}));var i={};r.r(i),r.d(i,"loadCharacterDisplayOrder",(function(){return qr})),r.d(i,"saveCharacterDisplayOrder",(function(){return Yr})),r.d(i,"getCachedCharacterData",(function(){return tn})),r.d(i,"getIsFetchingCharacterData",(function(){return nn})),r.d(i,"bustProfileCache",(function(){return an})),r.d(i,"getCharacterData",(function(){return cn}));var s={};r.r(s),r.d(s,"VENDOR_ENGRAMS_DROP_NO_DATA",(function(){return sn})),r.d(s,"VENDOR_ENGRAMS_DROP_LOW",(function(){return on})),r.d(s,"VENDOR_ENGRAMS_DROP_HIGH",(function(){return ln})),r.d(s,"getVendorDisplayName",(function(){return dn})),r.d(s,"getVendorEngramsData",(function(){return hn}));var o=r(0),l=r(1),u=r(83),d=r.n(u),p=r(4),h=r(3),b=r(17),m=r(2),f=r.n(m),j=r(5),v=r(84),_=r(6),O=r.n(_),g=r(32),x=r.n(g),w=r(203),y=r(47),S=r(45),A=r(85),I=r(93),E=r(94),k=r(202),N=r(49),D="https://www.bungie.net/platform/app/oauth/token/",T=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_NPM_PACKAGE_GITHEAD:"56883c024004d735c7389e65185ce2e15df8ade4",REACT_APP_BUNGIE_API_KEY:"d216f4575ce8407781070ce5579340ae",REACT_APP_BUNGIE_OAUTH_CLIENT_ID:"31116",REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET:"TgX91i4g22hBjysd4tffoiOoZRbkox5xH0p2x7mSC4I"}),C=T.REACT_APP_BUNGIE_API_KEY,P=T.REACT_APP_BUNGIE_OAUTH_CLIENT_ID,R=T.REACT_APP_BUNGIE_OAUTH_CLIENT_SECRET;if(!C||!P||!R)throw Error("React env vars must be provided");var M=C,B=P,L=R;var H,F=r(86);!function(e){e.GET_MANIFEST="GET_MANIFEST",e.LOAD_MANIFEST_DATA="LOAD_MANIFEST_DATA",e.FETCH_MANIFEST_DATA="FETCH_MANIFEST_DATA",e.PARSE_MANIFEST_DATA="PARSE_MANIFEST_DATA",e.STORE_MANIFEST_DATA="STORE_MANIFEST_DATA",e.MANIFEST_DATA_READY="MANIFEST_DATA_READY",e.MANIFEST_FETCH_ERROR="MANIFEST_FETCH_ERROR",e.UNAUTHED_FETCH_ERROR="UNAUTHED_FETCH_ERROR",e.FETCHING_CHARACTER_DATA_CHANGE="FETCHING_CHARACTER_DATA_CHANGE",e.LOG_OUT="LOG_OUT"}(H||(H={}));var G=new F.EventEmitter,U=G;function W(e,t){var r=Object(l.useRef)();Object(l.useEffect)((function(){r.current=t}),[t]),Object(l.useEffect)((function(){var t=function(e){var t;return null===(t=r.current)||void 0===t?void 0:t.call(r,e)};return G.addListener(e,t),function(){G.removeListener(e,t)}}),[e])}var V=r(92).a;V.initialize("UA-149614480-1",{}),V.set({anonymizeIp:!0}),V.pageview(window.location.pathname+window.location.search);var z,q,Y,J=V,K=function(e){Object(A.a)(r,e);var t=Object(I.a)(r);function r(){return Object(S.a)(this,r),t.call(this,"Bungie API disabled")}return r}(Object(E.a)(Error)),Q=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,n,a,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ae(),n={"x-api-key":M},r&&(n.Authorization="Bearer ".concat(r)),a="".concat(t.url).concat(t.params?"?"+Object.entries(t.params).map((function(e){var t=Object(p.a)(e,2),r=t[0],n=t[1];return"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n))})):""),c={method:t.method,headers:n,credentials:"include"},t.body&&(c.body=JSON.stringify(t.body)),e.next=8,fetch(a,c);case 8:if(200===(i=e.sent).status){e.next=23;break}if(401===i.status&&U.emit(H.UNAUTHED_FETCH_ERROR),503!==i.status){e.next=22;break}return e.prev=12,e.next=15,i.json();case 15:if(!(s=e.sent)||"SystemDisabled"!==s.ErrorStatus){e.next=18;break}throw new K;case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(12);case 22:throw Error(i.status.toString());case 23:return e.next=25,i.json();case 25:return e.abrupt("return",e.sent);case 26:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(t){return e.apply(this,arguments)}}(),X="MANIFEST_VERSION",Z="MANIFEST_DATA",$=["DestinyInventoryItemDefinition","DestinyVendorDefinition","DestinyRecordDefinition"],ee=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z||(z=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Loading manifest data from IDB"),e.next=3,Object(N.b)(Z);case 3:return t=e.sent,console.log("Finished loading manifest data from IDB"),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))()),e.abrupt("return",z);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}throw Error("No manifest!");case 3:return r=t.version,U.emit(H.FETCH_MANIFEST_DATA),e.next=7,fetch("https://www.bungie.net".concat(t.jsonWorldContentPaths.en));case 7:return n=e.sent,e.next=10,n.json();case 10:return a=e.sent,U.emit(H.PARSE_MANIFEST_DATA),Object.keys(a).forEach((function(e){$.includes(e)||delete a[e]})),U.emit(H.STORE_MANIFEST_DATA),e.next=16,Object(N.c)(Z,a);case 16:return localStorage.setItem(X,r),e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem(X),e.next=3,Object(N.a)(Z);case 3:Y=void 0,U.emit(H.MANIFEST_FETCH_ERROR);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y||(Y=Promise.resolve().then(Object(j.a)(f.a.mark((function e(){var t,r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ee(),J.event({category:"Data",action:"Attempt load manifest",nonInteraction:!0}),U.emit(H.GET_MANIFEST),e.next=5,Object(k.a)(Q);case 5:if(r=e.sent,n=localStorage.getItem(X),!r||!r.Response||r.Response.version!==n||window.location.search.includes("updateManifest")){e.next=15;break}if(q){e.next=13;break}return U.emit(H.LOAD_MANIFEST_DATA),e.next=12,t;case 12:q=e.sent;case 13:if(!q||!$.every((function(e){return q&&!!q[e]}))){e.next=15;break}return e.abrupt("return",{manifest:q});case 15:if(!r||!r.ErrorStatus||"Success"===r.ErrorStatus){e.next=20;break}if(J.event({category:"Errors",action:'Error status "'.concat(r.ErrorStatus,'" returned from manifest request'),nonInteraction:!0}),"SystemDisabled"!==r.ErrorStatus){e.next=19;break}return e.abrupt("return",{manifest:null,error:new K});case 19:return e.abrupt("return",{manifest:null,error:Error('Error status "'.concat(r.ErrorStatus,'" returned from manifest request'))});case 20:if(r&&r.Response){e.next=22;break}throw Error("No manifest received!");case 22:return q=void 0,J.event({category:"Data",action:"Fetch remote manifest",nonInteraction:!0}),e.next=26,te(r.Response);case 26:return a=e.sent,q=a,e.abrupt("return",{manifest:a});case 29:case"end":return e.stop()}}),e)})))).then((function(e){if(e.manifest&&!e.error)return U.emit(H.MANIFEST_DATA_READY),e;throw e.error})).catch((function(e){return console.error(e),U.emit(H.MANIFEST_FETCH_ERROR),Y=void 0,{manifest:null,error:e}}))),e.abrupt("return",Y);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(e,t){return J.event({category:"Character Data",action:"Fetch minimal profile",nonInteraction:!0}),Object(k.b)(Q,{components:[200,205],destinyMembershipId:t,membershipType:e})},ce=function(e,t){return J.event({category:"Character Data",action:"Fetch full profile",nonInteraction:!0}),Object(k.b)(Q,{components:[200,201,205,102,300,104],destinyMembershipId:t,membershipType:e})},ie=function(e){return Object(k.c)(Q,e)},se="bungieAccessToken",oe="bungieAccessTokenExpiryTime",le="bungieRefreshToken",ue="bungieRefreshTokenExpiryTime",de="bungieMembershipId",pe="destinyMemberships",he="destinyMembership",be="manualAuthed";U.on(H.UNAUTHED_FETCH_ERROR,(function(){console.log("Clearing invalid access token"),localStorage.removeItem(se)}));var me,fe=function(){localStorage.removeItem(se),localStorage.removeItem(oe),localStorage.removeItem(le),localStorage.removeItem(ue),localStorage.removeItem(de),localStorage.removeItem(pe)},je=function(){return!!localStorage.getItem(be)},ve=function(){return"".concat("https://www.bungie.net/en/OAuth/Authorize","?").concat(Object(y.stringify)({response_type:"code",client_id:B,client_secret:L}))},_e=!1,Oe=function(){fe(),J.event({category:"Auth",action:"Redirect for Bungie authentication",nonInteraction:!0});try{if(_e)throw console.log("Prevented re-navigation"),Error("Re-navigation attempt");window.location.assign(ve()),_e=!0}catch(e){console.error(e)}},ge=function(){localStorage.setItem(be,"TRUE"),Oe()},xe=function(e){if(1===e.length)return Pe(e[0]),e[0];var t=e.filter((function(e){return e.crossSaveOverride===e.membershipType})),r=e.filter((function(e){return 0===e.crossSaveOverride}));return 1===t.length&&0===r.length?(Pe(t[0]),t[0]):void 0},we=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,n,a,c,i,s,o,l,u,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=31;break}return e.next=4,t.json();case 4:return r=e.sent,n=r.access_token,a=r.expires_in,c=Date.now()+1e3*a,i=r.refresh_token,s=r.refresh_expires_in,o=Date.now()+1e3*s,l=r.membership_id,localStorage.setItem(se,n),localStorage.setItem(oe,c.toString()),localStorage.setItem(le,i),localStorage.setItem(ue,o.toString()),localStorage.setItem(de,l),e.next=19,Object(w.a)(Q,{membershipId:l,membershipType:254});case 19:if((u=e.sent)&&u.Response&&(!u.ErrorStatus||"Success"===u.ErrorStatus)){e.next=23;break}return J.event({category:"Errors",action:"Destiny membership fetch error, status: ".concat(u.ErrorStatus),nonInteraction:!0}),e.abrupt("return",{authSuccess:!1,error:"Status code ".concat(u.ErrorStatus," from memberships endpoint")});case 23:return d=u.Response.destinyMemberships,localStorage.setItem(pe,JSON.stringify(d)),(p=Te())&&!d.some((function(e){return e.membershipId===p.membershipId}))&&localStorage.removeItem(he),xe(d),e.abrupt("return",{accessToken:n,authSuccess:!0});case 31:if(200===t.status){e.next=34;break}return J.event({category:"Auth",action:"Status code ".concat(t.status," from authentication request"),nonInteraction:!0}),e.abrupt("return",{authSuccess:!1,error:"Status code ".concat(t.status," from authentication request")});case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(j.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching Bungie API access token for authentication code"),J.event({category:"Auth",action:"Oauth token request",nonInteraction:!0}),e.next=5,fetch(D,{body:Object(y.stringify)({grant_type:"authorization_code",code:t,client_id:B,client_secret:L}),cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",redirect:"follow",referrer:"no-referrer"});case 5:return r=e.sent,e.next=8,we(r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(j.a)(f.a.mark((function e(){var t,r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Refreshing Bungie API access token"),t=localStorage.getItem(le),J.event({category:"Auth",action:"Oauth token refresh",nonInteraction:!0}),e.next=6,fetch(D,{body:Object(y.stringify)({grant_type:"refresh_token",refresh_token:t,client_id:B,client_secret:L}),cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",redirect:"follow",referrer:"no-referrer"});case 6:return r=e.sent,e.next=9,we(r);case 9:return(n=e.sent)&&n.authSuccess||fe(),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){return localStorage.getItem(se)},Ie=function(){var e=Ae(),t=parseInt(localStorage.getItem(oe)||"-1",10);return e&&t>Date.now()},Ee=function(){var e=localStorage.getItem(le),t=parseInt(localStorage.getItem(ue)||"-1",10);return e&&t>Date.now()},ke=function(){var e=Ie(),t=localStorage.getItem(de),r=Ne();return!!(e&&t&&r)},Ne=function(){var e=localStorage.getItem(pe);try{if(e)return JSON.parse(e)}catch(t){J.event({category:"Data",action:"Error loading destiny memberships from local storage",nonInteraction:!0}),console.error("Error loading destiny memberships",t.message)}},De=function(){return!!Ne()},Te=function(){var e=localStorage.getItem(he);try{if(e)return JSON.parse(e);var t=Ne();if(t)return xe(t)}catch(r){J.event({category:"Data",action:"Error loading destiny membership from local storage",nonInteraction:!0}),console.error("Error loading destiny membership",r.message)}},Ce=function(){return!!Te()},Pe=function(e){localStorage.setItem(he,JSON.stringify(e))},Re=function(){var e=Object(j.a)(f.a.mark((function e(){var t,r,n,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URLSearchParams(window.location.search),!(r=t.get("code"))||ke()){e.next=11;break}return console.log("Fetching access token with auth code"),e.next=7,ye(r);case 7:if(!(n=e.sent)||!1!==(null===n||void 0===n?void 0:n.authSuccess)){e.next=11;break}return console.error(n.error),e.abrupt("return",!1);case 11:if(r&&window.history.replaceState({},document.title,"".concat(window.location.origin).concat(window.location.pathname)),!ke()||!De()){e.next=14;break}return e.abrupt("return",!0);case 14:if(a=Ie(),c=Ee(),a||!c){e.next=20;break}return e.next=19,Se();case 19:return e.abrupt("return",Re());case 20:return je()&&(console.log("Redirecting to fresh authentication for missing or expired access token, or missing destiny memberships"),Oe()),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(be),fe(),U.emit(H.LOG_OUT);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=r(8),Le=r(11),He=r.n(Le),Fe=r(18),Ge=r.n(Fe),Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.text,n=t.tags,a=void 0===n?[]:n,c=r||new URL(e).hostname;return Object(o.jsx)("li",{children:Object(o.jsx)("a",{href:e,target:"_blank",rel:"noopener",className:O.a.apply(void 0,Object(b.a)(a.map((function(e){return Ge.a["link_tag_".concat(e)]})))),children:Object(o.jsx)("span",{className:Ge.a.linkText,children:c})})})},We={1:"xb",2:"ps",3:"pc",4:"pc",5:"stadia"},Ve=function(e){var t=e.membershipType,r=e.membershipId,n=e.characterId,a=e.onImageExportClick,c=Object(l.useState)(!1),i=Object(p.a)(c,2),s=i[0],u=i[1];return Object(o.jsx)("div",{className:O()(Ge.a.characterLinks,Object(h.a)({},Ge.a.hide,s)),children:Object(o.jsx)("div",{className:Ge.a.content,children:Object(o.jsxs)("ul",{children:[Ue("https://www.destinyitemmanager.com",{text:"Destiny Item Manager",tags:["dim"]}),Ue("https://braytech.org/".concat(t,"/").concat(r,"/").concat(n,"/now"),{text:"Braytech",tags:["braytech"]}),Ue("https://destinysets.com/",{text:"Destiny Sets",tags:["destinysets"]}),Ue("https://www.d2checklist.com/".concat(t,"/").concat(r,"/milestones"),{text:"D2 Checklist",tags:["d2checklist"]}),Ue("https://guardianstats.com/profile/".concat(r),{text:"Guardianstats",tags:["guardianstats"]}),Ue("https://raid.report/".concat(We[t],"/").concat(r),{text:"Raid Report",tags:["raidreport"]}),Ue("https://dungeon.report/".concat(We[t],"/").concat(r),{text:"Dungeon Report",tags:["dungeonreport"]}),a&&Object(o.jsx)("li",{children:Object(o.jsx)("span",{className:Ge.a.link,onClick:Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,a();case 3:u(!1);case 4:case"end":return e.stop()}}),e)}))),children:Object(o.jsx)("span",{className:Ge.a.linkText,children:"Export image"})})})]})})})},ze="kinetic",qe="energy",Ye="power",Je="head",Ke="gloves",Qe="chest",Xe="legs",Ze="classItem",$e=(me={},Object(h.a)(me,ze,1498876634),Object(h.a)(me,qe,2465295065),Object(h.a)(me,Ye,953998645),Object(h.a)(me,Je,3448274439),Object(h.a)(me,Ke,3551918588),Object(h.a)(me,Qe,14239492),Object(h.a)(me,Xe,20886954),Object(h.a)(me,Ze,1585787867),me),et=Object.entries($e).reduce((function(e,t){var r=Object(p.a)(t,2),n=r[0],a=r[1];return Object(Be.a)(Object(Be.a)({},e),{},Object(h.a)({},a,n))}),{}),tt=[].concat([ze,qe,Ye],[Je,Ke,Qe,Xe,Ze]),rt=2,nt=3,at=["titan","hunter","warlock"],ct=1200,it=1250,st=1260,ot=function(e){return!!(e.state&&4&e.state)},lt=r(9),ut=r.n(lt),dt=function(e){var t,r=e.min,n=e.max,a=e.value,c=e.avgValue,i=e.label,s=e.icon,l=e.isMasterworked,u=e.itemName,d=e.location,p=e.isEquipped,b=n-r,m=Math.floor((a-r)/b*1e3)/10,f=Math.floor((c-r)/b*1e3)/10,j="".concat(a," ").concat(i),v=function(e,t){switch(e){case 0:return;case 1:return t?"Equipped":"Inventory";case 2:return"Vault";case 3:return"Vendor";case 4:return"Postmaster";default:return}}(d,p),_="".concat(u).concat(v?" (".concat(v,")"):""),g=Object(o.jsxs)("span",{className:ut.a.label,children:[Object(o.jsx)("span",{className:O()(ut.a.power,(t={},Object(h.a)(t,ut.a.max,a>=n),Object(h.a)(t,ut.a.belowAverage,a<c),t)),children:a}),Object(o.jsxs)("span",{className:ut.a.slotName,children:[Object(o.jsx)("span",{className:ut.a.generalLabel,children:i}),Object(o.jsx)("span",{className:ut.a.specificLabel,children:_})]})]});return Object(o.jsxs)("div",{className:ut.a.barWrapper,children:[Object(o.jsxs)("div",{className:ut.a.iconWrapper,title:_,children:[s?Object(o.jsx)("img",{className:ut.a.icon,src:"https://www.bungie.net".concat(s),alt:j}):null,s&&2===d?Object(o.jsx)("div",{className:ut.a.vaultOverlay}):null,s&&4===d?Object(o.jsx)("div",{className:ut.a.postmasterOverlay}):null,s&&l?Object(o.jsx)("div",{className:ut.a.masterworkOverlay}):null]}),Object(o.jsxs)("div",{className:ut.a.barContainer,children:[Object(o.jsx)("div",{className:ut.a.filledBar,style:{width:"".concat(m,"%")},children:g}),Object(o.jsx)("div",{className:ut.a.barLine,style:{left:"".concat(f,"%")}})]})]})},pt=r(16),ht=r.n(pt),bt={hunter:"Hunter Cloak",titan:"Titan Mark",warlock:"Warlock Bond"},mt=function(e){var t=tt.reduce((function(t,r){var n,a,c,i;return Object(Be.a)(Object(Be.a)({},t),{},Object(h.a)({},r,(null===(n=e.topItemBySlot)||void 0===n||null===(a=n[r])||void 0===a||null===(c=a.instanceData)||void 0===c||null===(i=c.primaryStat)||void 0===i?void 0:i.value)||e.overallPower))}),{}),r=Math.floor(e.overallPower),n=Math.min.apply(Math,Object(b.a)(Object.values(t))),a=Math.max(50*Math.floor(n/50)-50,0),c=Math.max.apply(Math,Object(b.a)(Object.values(t))),i=it-c<50?10:50,s=Math.ceil(c/i)*i,l=s-a,u=Math.floor((r-a)/l*1e3)/10;return Object(o.jsxs)("div",{className:ht.a.powerBars,children:[Object(o.jsxs)("div",{className:ht.a.powerRange,children:[Object(o.jsx)("div",{className:ht.a.minPower,children:a}),Object(o.jsx)("div",{className:ht.a.rangeLine}),Object(o.jsx)("div",{className:ht.a.maxPower,children:s})]}),Object(o.jsx)("div",{className:ht.a.bars,children:Object.entries(t).map((function(t){var n,c,i,l,u,d=Object(p.a)(t,2),h=d[0],b=d[1],m=null===(n=e.topItemBySlot)||void 0===n?void 0:n[h];return Object(o.jsx)(dt,{min:a,max:s,value:b,avgValue:r,label:(u=e.className,{chest:"Chest Armor",classItem:bt[u],energy:"Energy Weapon",gloves:"Gauntlets",head:"Helmet",kinetic:"Kinetic Weapon",legs:"Leg Armor",power:"Power Weapon"})[h]||h,icon:null===m||void 0===m||null===(c=m.itemDefinition)||void 0===c?void 0:c.displayProperties.icon,isMasterworked:m&&ot(m),itemName:null===m||void 0===m||null===(i=m.itemDefinition)||void 0===i?void 0:i.displayProperties.name,location:null===m||void 0===m?void 0:m.location,isEquipped:null===m||void 0===m||null===(l=m.instanceData)||void 0===l?void 0:l.isEquipped},"".concat(e.character.characterId,"_").concat(h))}))}),Object(o.jsx)("div",{className:ht.a.powerLabel,children:Object(o.jsx)("div",{className:ht.a.indicator,style:{left:"".concat(u,"%")},children:r})})]})},ft=r(10),jt=r.n(ft),vt=r(23),_t=r.n(vt),Ot=function(e){var t=e.value,r=Math.floor(t),n=t===r?t+1:Math.ceil(t);r===st&&t===r&&(n=r,r-=1);var a=Math.floor(100*t-100*r);return Object(o.jsxs)("div",{className:_t.a.interPowerBar,children:[Object(o.jsx)("div",{className:_t.a.min,children:r}),Object(o.jsxs)("div",{className:_t.a.bar,children:[Object(o.jsx)("div",{className:_t.a.fillBar,style:{width:"".concat(a,"%")}}),Object(o.jsx)("div",{className:_t.a.barOverlay})]}),Object(o.jsx)("div",{className:_t.a.max,children:n})]})},gt=r(87),xt=r.n(gt),wt=function(e){return e>=0?"+".concat(e):"".concat(e)},yt=function(e){var t=e.children,r=e.withSign,n=void 0!==r&&r;return Object(o.jsx)("span",{className:xt.a.inlinePowerNumber,children:n?wt(t):t})},St=function(e){var t=e.value,r=e.max;if(void 0===t||void 0===r)return null;var n=Math.floor(t/r*1e3)/10,a=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};return Object(o.jsxs)("div",{className:jt.a.progressBar,title:"".concat(a(t)," / ").concat(a(r)),children:[Object(o.jsx)("div",{className:jt.a.progressBarFill,style:{width:"".concat(n,"%")}}),Object(o.jsx)("div",{className:jt.a.progressBarOverlay})]})},At=function(e){var t=e.overallPowerExact,r=e.overallPower,n=e.artifactData,a=Math.floor(r);return n&&0!==n.bonusPower?Object(o.jsxs)("div",{className:jt.a.details,children:[Object(o.jsxs)("div",{className:jt.a.detailsRow,children:[Object(o.jsx)("div",{className:jt.a.detailsLabel,children:"Maximum equippable gear power:"}),Object(o.jsx)("div",{className:jt.a.defailsValue,children:Object(o.jsx)(yt,{children:a})})]}),Object(o.jsx)("div",{className:jt.a.detailsRow,children:Object(o.jsx)(Ot,{value:t})}),n?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:jt.a.detailsRow,children:[Object(o.jsxs)("div",{className:jt.a.detailsLabel,children:[Object(o.jsx)("img",{className:jt.a.detailsInlineIcon,src:"https://www.bungie.net".concat(n.iconPath),alt:""}),n.name," bonus power:"]}),Object(o.jsx)("div",{className:jt.a.detailsValue,children:Object(o.jsx)(yt,{withSign:!0,children:n.bonusPower})})]}),Object(o.jsx)("div",{className:jt.a.detailsRow,children:Object(o.jsx)(St,{value:n.progressToNextLevel,max:n.nextLevelAt})})]}):null]}):Object(o.jsx)("div",{className:jt.a.details,children:Object(o.jsx)("div",{className:jt.a.detailsRow,children:Object(o.jsx)(Ot,{value:t})})})},It=r(7),Et=r.n(It),kt=function(e){var t=e.overallPowerExact,r=e.overallPower,n=e.potentialOverallPower;n=n||Math.min(ct,r);var a=8*((t===r?r+1:Math.ceil(t))-t),c=8*(n-t);return Object(o.jsxs)("div",{className:Et.a.hints,children:[n&&n>r&&r>it&&Object(o.jsxs)("div",{className:O()(Et.a.hint,Et.a.dropHint,Et.a.legendaryWorldDropHint),children:[Object(o.jsxs)("span",{children:["Powerful rewards can increase your overall gear power to"," ",Object(o.jsx)(yt,{children:n})]}),Object(o.jsx)("div",{className:Et.a.hintExtra,children:Object(o.jsxs)("div",{className:Et.a.hintExtraInner,children:[Object(o.jsxs)("div",{children:["Powerful rewards from milestones or prime engrams can drop with a power level up to ",Object(o.jsx)(yt,{children:r})," for this character."]}),Object(o.jsx)("div",{children:"Replacing items which are below your current overall power can increase your power to a higher average."}),r<st&&Object(o.jsx)("div",{children:"Raising your overall power before collecting your next pinnacle reward will give you the most efficient progress."}),a&&a!==c&&Object(o.jsxs)("div",{children:["You need an extra"," ",Object(o.jsx)(yt,{children:a})," total power on your items to reach an overall power of"," ",Object(o.jsx)(yt,{children:Math.floor(r+1)}),"."]}),c&&Object(o.jsxs)("div",{children:["You need an extra"," ",Object(o.jsx)(yt,{children:c})," total power on your items to reach an overall power of"," ",Object(o.jsx)(yt,{children:n}),"."]})]})})]}),n>r&&r<=it&&Object(o.jsxs)("div",{className:O()(Et.a.hint,Et.a.dropHint,Et.a.worldDropHint),children:[Object(o.jsxs)("span",{children:["World drops can increase your overall gear power to"," ",Object(o.jsx)(yt,{children:n})]}),Object(o.jsx)("div",{className:Et.a.hintExtra,children:Object(o.jsxs)("div",{className:Et.a.hintExtraInner,children:[Object(o.jsxs)("div",{children:["World drops (from strikes, public events,"," ",r<=it&&"vendors, ","non-powerful rewards) can drop with a power level"," ",r>=ct?Object(o.jsxs)(o.Fragment,{children:["from ",Object(o.jsx)(yt,{children:r-3})," to"," ",Object(o.jsx)(yt,{children:r})]}):Object(o.jsxs)(o.Fragment,{children:["above your current power, increasing your power incrementally up to ",Object(o.jsx)(yt,{children:n})]})," ","for this character."]}),Object(o.jsx)("div",{children:"Replacing items which are below your current overall power can increase your power to a higher average."}),a&&a!==c&&Object(o.jsxs)("div",{children:["You need an extra"," ",Object(o.jsx)(yt,{children:a})," total power on your items to reach an overall power of"," ",Object(o.jsx)(yt,{children:Math.floor(r+1)}),"."]}),c&&Object(o.jsxs)("div",{children:["You need an extra"," ",Object(o.jsx)(yt,{children:c})," total power on your items to reach an overall power of"," ",Object(o.jsx)(yt,{children:n}),"."]})]})})]}),n===r&&r>=ct&&r<it&&Object(o.jsxs)("div",{className:O()(Et.a.hint,Et.a.dropHint,Et.a.powerfulHint),children:[Object(o.jsxs)("span",{children:["Powerful rewards can increase your overall gear power up to the powerful cap of ",Object(o.jsx)(yt,{children:it})]}),Object(o.jsx)("div",{className:Et.a.hintExtra,children:Object(o.jsxs)("div",{className:Et.a.hintExtraInner,children:[Object(o.jsxs)("div",{children:["Powerful and pinnacle reward sources (Weekly challenges, Year 4 raids) will give you items above your overall gear power, with powerful rewards capped at"," ",Object(o.jsx)(yt,{children:it}),"."]}),a&&Object(o.jsxs)("div",{children:["You need an extra ",Object(o.jsx)(yt,{children:a})," ","total power on your items to reach an overall power of"," ",Object(o.jsx)(yt,{children:Math.floor(r+1)}),"."]}),Object(o.jsx)("div",{children:"After getting a powerful reward, check back here to see if it's beneficial to catch up the rest of your slots with world drops before getting another!"})]})})]}),n===r&&r>=it&&r<st&&Object(o.jsxs)("div",{className:O()(Et.a.hint,Et.a.dropHint,Et.a.pinnacleHint),children:[Object(o.jsxs)("span",{children:["Pinnacle rewards can increase your overall gear power up to the pinnacle cap of ",Object(o.jsx)(yt,{children:st})]}),Object(o.jsx)("div",{className:Et.a.hintExtra,children:Object(o.jsxs)("div",{className:Et.a.hintExtraInner,children:[Object(o.jsxs)("div",{children:["Pinnacle reward sources (Some weekly challenges, Year 4 raids) will give you items at"," ",Object(o.jsx)(yt,{children:Math.min(r+2,st)})," ","power."]}),a&&Object(o.jsxs)("div",{children:["You need an extra ",Object(o.jsx)(yt,{children:a})," ","total power on your items to reach an overall power of"," ",Object(o.jsx)(yt,{children:Math.floor(r+1)}),"."]})]})})]})]})},Nt={red:0,green:0,blue:0},Dt={red:0,green:4,blue:15},Tt=function(e){var t,n=e.data,a=e.onDragStart,c=e.onDragEnd,i=e.onDragDrop,s=Math.floor(n.overallPower),u=n.artifactData?n.artifactData.bonusPower:0,d=function(e){var t=Object(l.useRef)(null);return[t,function(){var n=Object(j.a)(f.a.mark((function n(){var a,c,i,s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.current){n.next=18;break}return n.prev=1,n.next=4,r.e(0).then(r.t.bind(null,204,7));case 4:return a=n.sent,n.next=7,r.e(1).then(r.t.bind(null,205,7));case 7:return c=n.sent,i=c.saveAs,n.next=11,a.toBlob(t.current);case 11:s=n.sent,i(s,"destiny-power-bars-".concat(e,".png")),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(1),console.error("Error capturing image of character display",n.t0);case 18:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(){return n.apply(this,arguments)}}()]}(n.className),b=Object(p.a)(d,2),m=b[0],v=b[1];return function(e,t,r,n,a,c){var i,s=Object(l.useState)(!1),u=Object(p.a)(s,2),d=u[0],b=u[1],m=Object(l.useState)(0),f=Object(p.a)(m,2),j=f[0],v=f[1];return Object(o.jsxs)("div",{className:O()(He.a.characterDisplayWrapper,(i={},Object(h.a)(i,He.a.dragging,d),Object(h.a)(i,He.a.dragOver,j>0),i)),style:{backgroundColor:e},onDragStart:function(){b(!0),null===n||void 0===n||n()},onDragEnd:function(){b(!1),null===a||void 0===a||a()},onDragEnter:function(){return v(j+1)},onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDragLeave:function(){return v(Math.max(j-1,0))},onDrop:function(){v(0),null===c||void 0===c||c()},draggable:!0,ref:r,children:[t,Object(o.jsx)("div",{className:He.a.dragOverlay,children:Object(o.jsx)("span",{children:"Drag to reorder"})})]})}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=e.red,r=e.green,n=e.blue;return"rgb(".concat(t,",").concat(r,",").concat(n,")")}(n.character.emblemColor||Dt),Object(o.jsxs)("div",{className:He.a.characterDisplay,children:[Object(o.jsxs)("div",{className:He.a.header,children:[Object(o.jsx)("img",{className:He.a.emblemBackground,src:"https://www.bungie.net".concat(n.character.emblemBackgroundPath||"/common/destiny2_content/icons/9dc4f3283ee9f9fc3d3499e9f9f1756c.jpg"),alt:""}),Object(o.jsx)("div",{className:O()(He.a.name,Object(h.a)({},He.a.withTitle,!!n.title)),children:(t=n.className,t.substr(0,1).toUpperCase()+t.substr(1))}),n.title&&Object(o.jsx)("div",{className:He.a.title,children:n.title}),Object(o.jsx)("div",{className:O()(He.a.power,Object(h.a)({},He.a.hasRedacted,!!n.hasRedactedEquippableItems)),children:s+u}),Object(o.jsx)("div",{className:He.a.headerOverlayBar})]}),Object(o.jsxs)("div",{className:He.a.content,children:[Object(o.jsx)(At,Object(Be.a)({},n)),Object(o.jsx)(mt,Object(Be.a)({},n)),Object(o.jsx)(kt,Object(Be.a)({},n))]}),Object(o.jsx)(Ve,{membershipType:n.character.membershipType,membershipId:n.character.membershipId,characterId:n.character.characterId,onImageExportClick:v})]}),m,a,c,i)},Ct=r(33),Pt=r.n(Ct),Rt=function(){return Object(o.jsx)("div",{className:Pt.a.fetchSpinnerContainer,children:Object(o.jsxs)("div",{className:Pt.a.anchor,children:[Object(o.jsx)("div",{className:Pt.a.spinner}),Object(o.jsx)("div",{className:Pt.a.spinnerSmall})]})})},Mt=r(88),Bt=r.n(Mt),Lt="56883c024004d735c7389e65185ce2e15df8ade4".substr(0,6),Ht=function(){return Object(o.jsxs)("div",{className:Bt.a.buildStamp,children:[Lt," ","2020-11-25T09:53:14.624Z"]})},Ft=r(57),Gt=r.n(Ft),Ut=function(){return Object(o.jsx)("div",{className:Gt.a.kofiContainer,children:Object(o.jsxs)("a",{className:Gt.a.link,href:"https://ko-fi.com/tomcorke",target:"_blank",rel:"noopener",children:[Object(o.jsx)("img",{height:"36",style:{border:"0px",height:"36px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAEM0lEQVRoge2Y229VRRSHv93L4VJ6oU14EKHIi4ARY9BEE5UaNZJqMFGQgDEaX0xINMbwAl4QgprGa+R/IAjBoFgJD0ZFE5sAiShYwVqxobGFtmBbyDltT8csZzeHszv7dPalCjJfstPT2WvPzG/WzFozg8PhcDgcDofD4XA4HI7/P56NQqXUSmAXUA5c/g9HpQwYAXqB34BDwCdAzmTseVbyJqOU+l5dveSUUluUUgSfsBGzoS7eUP0rZIA3gU6gcaoGbQVfC9wEnAKWXS+ChRlAKzArzMBWcMzVnyptwG5gP3BMQktI5YuAlkQNK6U6rUJWPq/UxYtKDQ2VthOb7m6lstkokfC+QFBaqJT6LsR2VN6btFSk5oK9e+CrL2F4GMrKYG49NDXBo6uhvFzbHD0C+/ZCVxfkx2B2FdxxJzz9DFRXT9VCcJZ1AfcAe4C1Bl1rgPenqsSIeNgPCma2vwH798EN87UISQki/MIA3HU3vL4NDh2EnR/B7FlQ36AHJZeD7rOw7Bb4cCfUlUwGTcA3hvJGPyeXB8oPep7XnL7g1gOwbSssWapFTOQ/Sfry9PXpv7Lkqmsgk4Hx8cL34v2TJ/RMeG1rHMH/iANWBcpOeZ63JGiYPEq3tUFNTbFY0L9FWEMDVFVBbR1UVhaLFfJ5WNgIP5+E/v64vfjTUFZvMkwueCQHM2cWi70SKRevBgfkSmZk4PIl6DsftxcZQ5kxPiUXPGcOZLP+tI3JqB/A5hqdYsOkqQtcMH2XXPCtyyGbiy9YPC/rfMECmDcvTg23AysM5WeMzcVpoYhVzbCoEXp7CunHFhkkmR2yLB5fE7cHH4SUy0lqEraCR0PfyPrd+IJOQ4OD2mM2iFgJWL93wrPP6fRVmmAAkKxxFFhp+CoPfGyqzTYttYeskwKfH4C3d8D8G3VUDkbjolY9/f70aXhyHby8yaYbXwA/SdQAbgYeLGH7HrDJdB5OT7Dw2afQ8pbegMjOSTw4qUXfsx2/wlprsVGQQVlOyAVAeltLYfVjUFGhPS0erK0tFj39Ys8CD5UySP942PwIbN8B/X0wMFAIZLK2x0a12PVPTYfYr/1Z2FvKaHrOw/c/AC3vwtAQ9PTojYdE444OHaBefCnN1mQf/YS0Clyayth2DR+fWBeRaG+HVzdr0ZUV8PxGWL8hrjCJI8O+qG7gFz/1HAkVl+AS73jsK7w/zii1YZ1Su3fFrsJnsemirtRjHARLwT8At8UbLsniI3otl0XcmBSQa1g50J+L8lGSKD0cqXtBKk17+0iciCo2DNug9WMajSWgNa2KbKf0vcDhaRBiQ4+/sxqM+qFpStt6+FvglRQ6H5W/gIfjiA3D1sMTP2WjvgVY6h+6x/w68v4TrE/+H/cPH6a2xgxlnp965Dr2HSAbW1ySM7rD4XA4HA6Hw+FwXD8AfwPHcRHtjfBbbgAAAABJRU5ErkJggg==",alt:"Buy Me a Coffee at ko-fi.com"}),Object(o.jsx)("span",{children:"Buy me a coffee"})]})})};function Wt(){return(Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var zt=l.createElement("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"});function qt(e,t){var r=e.title,n=e.titleId,a=Vt(e,["title","titleId"]);return l.createElement("svg",Wt({role:"img",viewBox:"0 0 24 24",ref:t,"aria-labelledby":n},a),void 0===r?l.createElement("title",{id:n},"GitHub icon"):r?l.createElement("title",{id:n},r):null,zt)}var Yt=l.forwardRef(qt);r.p;function Jt(){return(Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Kt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Qt=l.createElement("path",{d:"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"});function Xt(e,t){var r=e.title,n=e.titleId,a=Kt(e,["title","titleId"]);return l.createElement("svg",Jt({role:"img",viewBox:"0 0 24 24",ref:t,"aria-labelledby":n},a),void 0===r?l.createElement("title",{id:n},"Twitter icon"):r?l.createElement("title",{id:n},r):null,Qt)}var Zt,$t,er,tr=l.forwardRef(Xt),rr=(r.p,r(34)),nr=r.n(rr),ar=function(){return Object(o.jsxs)("div",{className:nr.a.socialLinks,children:[Object(o.jsx)("div",{className:nr.a.link,children:Object(o.jsx)(Ut,{})}),Object(o.jsx)("a",{className:nr.a.link,href:"https://www.twitter.com/corke_tom",target:"_blank",rel:"noreferrer noopener",children:Object(o.jsx)(tr,{width:20,height:20,style:{fill:"rgba(255,255,255,0.8)"}})}),Object(o.jsx)("a",{className:nr.a.link,href:"https://github.com/tomcorke/destiny-power-bars",target:"_blank",rel:"noreferrer noopener",children:Object(o.jsx)(Yt,{width:20,height:20,style:{fill:"rgba(255,255,255,0.8)"}})})]})},cr=r(89),ir=r.n(cr),sr=function(){return Object(o.jsxs)("div",{className:ir.a.footer,children:[Object(o.jsx)(ar,{}),Object(o.jsx)(Ht,{})]})},or=r(35),lr=r.n(or),ur=function(){return Object(o.jsxs)("div",{className:lr.a.headerContainer,children:[Object(o.jsx)("div",{className:lr.a.header,children:"Destiny Power Bars"}),Object(o.jsxs)("div",{className:lr.a.subHeader,children:["by"," ",Object(o.jsx)("a",{className:lr.a.author,href:"https://twitter.com/corke_tom",rel:"noreferrer noopener",target:"_blank",children:"Tom Corke"})]})]})},dr=r(25),pr=r.n(dr),hr=function(e){var t=e.items,r=e.withTopMargin;return Object(o.jsx)("div",{className:O()(pr.a.LoadingChecklist,Object(h.a)({},pr.a.topMargin,r)),children:Object(o.jsx)("ul",{children:t.map((function(e){return Object(o.jsx)("li",{children:Object(o.jsxs)("div",{className:pr.a.item,children:[Object(o.jsx)("div",{className:O()(pr.a.status,pr.a[e.status])}),e.label]})},e.label)}))})})},br=r(19),mr=r.n(br),fr=function(e){var t=e.children;return Object(o.jsxs)("div",{className:mr.a.loading,children:[Object(o.jsxs)("div",{className:mr.a.anchor,children:[Object(o.jsx)("div",{className:mr.a.spinnerLarge}),Object(o.jsx)("div",{className:mr.a.spinnerLargeDouble}),Object(o.jsx)("div",{className:mr.a.spinnerSmall}),Object(o.jsx)("div",{className:mr.a.spinnerSmallDouble})]}),Object(o.jsx)("div",{className:mr.a.status,children:t})]})},jr=r(26),vr=r.n(jr),_r=function(e){var t,r,n=e.lowResImage,a=e.highResImage,c=e.alt,i=void 0===c?"":c,s=Object(l.useState)(!1),u=Object(p.a)(s,2),d=u[0],b=u[1],m=Object(l.useCallback)((function(){b(!0)}),[b]);return Object(o.jsxs)("div",{className:vr.a.lazyImage,children:[Object(o.jsx)("img",{src:a,alt:i,className:O()((t={},Object(h.a)(t,vr.a.hidden,!d),Object(h.a)(t,vr.a.overlay,!d),t)),onLoad:m}),Object(o.jsx)("img",{src:n,alt:i,className:O()((r={},Object(h.a)(r,vr.a.hidden,d),Object(h.a)(r,vr.a.overlay,d),r))})]})},Or=r.p+"static/media/example-titan-character-display-with-info-blur.cbe18dfa.jpg",gr=r.p+"static/media/example-titan-character-display-with-info.2daef1c3.png",xr=r(36),wr=r.n(xr),yr=function(){return ge()},Sr=function(e){var t=e.onLoginClick,r=void 0===t?yr:t;return Object(o.jsxs)("div",{className:wr.a.loginContainer,children:[Object(o.jsx)("div",{className:wr.a.exampleImage,children:Object(o.jsx)(_r,{lowResImage:Or,highResImage:gr,alt:"Example Destiny Power Bars"})}),Object(o.jsxs)("div",{className:wr.a.login,children:[Object(o.jsx)("div",{children:"Destiny Power Bars requires access to your inventory and vault to determine your maximum power per slot and character. Please log in to Bungie.net to authorize this application."}),Object(o.jsx)("button",{className:wr.a.loginButton,onClick:r,children:"Log in with Bungie.net"})]})]})},Ar=r(12),Ir=r.n(Ar),Er=function(){return Me()},kr={1:"xbox",2:"psn",3:"steam",4:"blizzard",5:"stadia"},Nr=function(e){return e.crossSaveOverride&&e.crossSaveOverride===e.membershipType},Dr=function(e){return e.crossSaveOverride&&e.crossSaveOverride!==e.membershipType},Tr=function(e){var t=e.membership;return 0===t.applicableMembershipTypes.length?null:Object(o.jsx)("div",{className:Ir.a.crossSaveDisplayWrapper,children:Object(o.jsxs)("div",{className:Ir.a.crossSaveDisplay,title:"Cross-save enabled for: ".concat(t.applicableMembershipTypes.map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.substr(0,1).toUpperCase()+e.substr(1)}(kr[e])})).join(", ")),children:[Object(o.jsx)("div",{className:Ir.a.crossSaveIcon}),t.applicableMembershipTypes.map((function(e){return Object(o.jsx)("div",{className:O()(Ir.a.crossSaveMembershipIcon,Ir.a["crossSaveMembershipType_".concat(kr[e])])},e)}))]})})},Cr=function(e){var t=e.onMembershipSelect,r=e.api,n=e.onLogout,a=void 0===n?Er:n,c=r.bungieAuth.getDestinyMemberships();return c?0===c.length?Object(o.jsx)("div",{children:"No destiny memberships!"}):Object(o.jsxs)("div",{className:Ir.a.membershipSelect,children:[c.filter((function(e){return!Dr(e)})).filter((function(e){return 4!==e.membershipType})).map((function(e){var r;return Object(o.jsxs)("div",{className:O()(Ir.a.membership,Ir.a["platform_".concat(kr[e.membershipType])],(r={},Object(h.a)(r,Ir.a.crossSaveActive,Nr(e)),Object(h.a)(r,Ir.a.crossSaveDisabled,Dr(e)),r)),onClick:function(){return t(e)},children:[Object(o.jsx)("span",{className:Ir.a.membershipDisplayName,children:e.displayName}),Nr(e)?Object(o.jsx)(Tr,{membership:e}):null]},e.membershipId)})),Object(o.jsxs)("button",{className:Ir.a.logOut,onClick:function(){return a()},title:"Log out",children:[Object(o.jsx)("div",{className:Ir.a.logOutIcon}),Object(o.jsx)("div",{className:Ir.a.logOutText,children:"Log out"})]})]}):null},Pr=r(90),Rr=r.n(Pr),Mr=r(58),Br=r.n(Mr),Lr=r(59),Hr=r.n(Lr),Fr=r(48),Gr=r.n(Fr),Ur=r(91),Wr=r.n(Ur),Vr="characterDisplayOrder",zr="cachedCharacterData",qr=function(){var e=localStorage.getItem(Vr);try{return e?JSON.parse(e):void 0}catch(t){return}},Yr=function(e){localStorage.setItem(Vr,JSON.stringify(e))},Jr=function(e){return Object.values(e).reduce((function(e,t){return e+t}),0)/Object.keys($e).length},Kr=function(e){return Math.floor(Jr(e))},Qr=function(e){return Object.values(e).reduce((function(e,t){return e.concat(t.items)}),[])},Xr=function(e,t,r,n){return e.map((function(e){var n=e.itemInstanceId?r[e.itemInstanceId]:void 0,a=t.DestinyInventoryItemDefinition[e.itemHash];return Object(Be.a)(Object(Be.a)({},e),{},{instanceData:n,itemDefinition:a})})).filter((function(e){return e.instanceData&&e.itemDefinition&&[rt,nt].includes(e.itemDefinition.itemType)})).map((function(e){return Object(Be.a)(Object(Be.a)({},e),{},{instanceData:e.instanceData,itemDefinition:e.itemDefinition})})).map((function(e){return Object(Be.a)(Object(Be.a)({},e),{},{slotName:et[e.itemDefinition.inventory.bucketTypeHash]})})).filter((function(e){return e.instanceData.primaryStat&&e.instanceData.primaryStat.value})).filter((function(e){return function(e,t){return!!e.instanceData&&!(e.instanceData.equipRequiredLevel>t.baseCharacterLevel)&&(3===e.itemDefinition.classType||e.itemDefinition.classType===t.classType)&&(16===e.instanceData.cannotEquipReason||e.instanceData.canEquip,!0)}(e,n)}))},Zr=function(e,t){if(!e||!e.instanceData||!e.instanceData.primaryStat)return 0;var r=e.instanceData.primaryStat.value;return t&&t.some((function(t){return t.itemInstanceId===e.itemInstanceId}))&&(r+=.5),ot(e)&&(r+=.25),1===e.location&&(r+=.125),r},$r=function(e){var t;return null===e||void 0===e||null===(t=e.itemDefinition.equippingBlock)||void 0===t?void 0:t.uniqueLabel},en=function(e,t,r,n,a,c,i,s){var o=t[e],l=at[o.classType],u=Xr(c,n,r,o),d=Xr(i.items,n,r,o).filter((function(e){return 3===e.itemDefinition.classType||e.itemDefinition.classType===o.classType})),p=c.some((function(e){var t=n.DestinyInventoryItemDefinition[e.itemHash];return(null===t||void 0===t?void 0:t.redacted)&&(null===t||void 0===t?void 0:t.equippable)})),h=u.concat(d),b=Br()(h,(function(e){return e.slotName})),m=Hr()(b,(function(e){return Gr()(e,(function(e){return Zr(e,a)}))})),f=Br()(Object.values(m).filter($r),$r);Rr()(f,(function(e){if(!(e.length<=1)){var t=[];if(e.forEach((function(r){var n=e.filter((function(e){return e!==r})).filter((function(e){return!!e})).map((function(e){return e})),c=!0,i=Object(Be.a)({},m);n.forEach((function(e){var t=b[e.slotName].filter((function(e){return!$r(e)}));t.length>0?i[e.slotName]=Gr()(t,(function(e){return Zr(e,a)})):c=!1})),c&&t.push(i)})),t.length>0){var r=Gr()(t,(function(e){return Wr()(Object.values(e),Zr)}));m=r}}}));Object.values(m).forEach((function(e){e&&215593132===e.bucketHash&&(e.location=4)}));var j,v=function(e){return Hr()(e,(function(e){var t,r;return(null===e||void 0===e||null===(t=e.instanceData)||void 0===t||null===(r=t.primaryStat)||void 0===r?void 0:r.value)||0}))}(m),_=Jr(v),O=Kr(v),g=c.find((function(e){return 1506418338===e.bucketHash})),x=(null===g||void 0===g?void 0:g.itemInstanceId)&&r[g.itemInstanceId];if(g&&s.seasonalArtifact&&x){var w,y,S,A,I,E,k=n.DestinyInventoryItemDefinition[g.itemHash];j={bonusPower:s.seasonalArtifact.powerBonus||x.primaryStat.value,iconPath:null===(w=k.displayProperties)||void 0===w?void 0:w.icon,name:(null===(y=k.displayProperties)||void 0===y?void 0:y.name)||"Artifact",progressToNextLevel:null===(S=s.seasonalArtifact)||void 0===S||null===(A=S.powerBonusProgression)||void 0===A?void 0:A.progressToNextLevel,nextLevelAt:null===(I=s.seasonalArtifact)||void 0===I||null===(E=I.powerBonusProgression)||void 0===E?void 0:E.nextLevelAt}}for(var N=Object(Be.a)({},v),D=function(){var e=Kr(N);Object.keys(N).forEach((function(t){return N[t]=Math.max(ct,Math.max(e,N[t]))}))};Object.values(N).some((function(e){return e<Kr(N)||e<ct}));)D();var T=Kr(N),C=n.DestinyRecordDefinition[o.titleRecordHash||""],P=C&&C.titleInfo.titlesByGenderHash[o.genderHash];return{character:o,className:l,overallPowerExact:_,overallPower:O,potentialOverallPower:T,topItemBySlot:m,artifactData:j,title:P,hasRedactedEquippableItems:p}},tn=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=localStorage.getItem(zr))try{n=JSON.parse(r),t(n)}catch(a){console.error("Error parsing cached character data",a)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=!1,nn=function(){return rn},an=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,n,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.find((function(e){return e.topItemBySlot&&Object.values(e.topItemBySlot).find((function(e){return null===e||void 0===e?void 0:e.itemInstanceId}))})),(null===(a=Object.values(null!==(r=null===n||void 0===n?void 0:n.topItemBySlot)&&void 0!==r?r:{}).find((function(e){return null===e||void 0===e?void 0:e.itemInstanceId})))||void 0===a?void 0:a.itemInstanceId)&&n){e.next=4;break}return e.abrupt("return");case 4:return c=1===(a.state&&1&a.state),i={state:c,itemId:a.itemInstanceId,characterId:null===n||void 0===n?void 0:n.character.characterId,membershipType:null===n||void 0===n?void 0:n.character.membershipType},rn=!0,U.emit(H.FETCHING_CHARACTER_DATA_CHANGE),e.prev=8,e.next=11,ie(i);case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(8),e.t0;case 16:return e.prev=16,rn=!1,U.emit(H.FETCHING_CHARACTER_DATA_CHANGE),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[8,13,16,20]])})));return function(t){return e.apply(this,arguments)}}(),cn=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,n,a,c,i,s,o,l,u,d,p,h,b,m,j,v,_,O,g,x,w,y,S,A,I,E,k,N,D,T,C,P,R;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,Re();case 4:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:if(x=ne(),rn=!0,U.emit(H.FETCHING_CHARACTER_DATA_CHANGE),w=Te()){e.next=13;break}return e.abrupt("return");case 13:return e.prev=13,e.next=16,ce(w.membershipType,w.membershipId);case 16:if("SystemDisabled"!==(y=e.sent).ErrorStatus){e.next=19;break}throw new K;case 19:e.next=32;break;case 21:if(e.prev=21,e.t0=e.catch(13),"401"!==e.t0.message){e.next=31;break}return e.next=26,Re();case 26:return e.next=28,ce(w.membershipType,w.membershipId);case 28:y=e.sent,e.next=32;break;case 31:throw e.t0;case 32:if(y&&(null===(r=y)||void 0===r||null===(n=r.Response)||void 0===n||null===(a=n.characters)||void 0===a?void 0:a.data)&&(null===(c=y)||void 0===c||null===(i=c.Response)||void 0===i||null===(s=i.characterEquipment)||void 0===s?void 0:s.data)&&(null===(o=y)||void 0===o||null===(l=o.Response)||void 0===l||null===(u=l.characterInventories)||void 0===u?void 0:u.data)&&(null===(d=y)||void 0===d||null===(p=d.Response)||void 0===p||null===(h=p.profileInventory)||void 0===h?void 0:h.data)&&(null===(b=y)||void 0===b||null===(m=b.Response)||void 0===m||null===(j=m.itemComponents)||void 0===j||null===(v=j.instances)||void 0===v?void 0:v.data)&&(null===(_=y)||void 0===_||null===(O=_.Response)||void 0===O||null===(g=O.profileProgression)||void 0===g?void 0:g.data)){e.next=34;break}return e.abrupt("return");case 34:return S=y.Response.characters.data,A=y.Response.characterEquipment.data,I=y.Response.characterInventories.data,E=y.Response.profileInventory.data,k=y.Response.itemComponents.instances.data,N=y.Response.profileProgression.data,e.prev=40,e.next=43,x;case 43:D=e.sent,e.next=50;break;case 46:return e.prev=46,e.t1=e.catch(40),console.error(e.t1),e.abrupt("return");case 50:if(D&&D.manifest){e.next=52;break}return e.abrupt("return");case 52:T=D.manifest,C=Qr(I).concat(Qr(A)).concat(E.items),P=Object.keys(S),R=P.map((function(e){return en(e,S,k,T,A[e].items,C,E,N)})),f=R,localStorage.setItem(zr,JSON.stringify(f)),t(R),e.next=63;break;case 60:throw e.prev=60,e.t2=e.catch(1),e.t2;case 63:return e.prev=63,rn=!1,U.emit(H.FETCHING_CHARACTER_DATA_CHANGE),e.finish(63);case 67:case"end":return e.stop()}var f}),e,null,[[1,60,63,67],[13,21],[40,46]])})));return function(t){return e.apply(this,arguments)}}(),sn="0",on="1",ln="2",un={devrim:"Devrim Kay (EDZ)",sloane:"Sloane (Titan)",failsafe:"Failsafe (Nessus)",asher:"Asher Mir (Io)",zavala:"Zavala (Vanguard, Tower)",shaxx:"Shaxx (Crucible, Tower)",banshee:"Banshee-44 (Gunsmith, Tower)",fanboy:"Brother Vance (Mercury)",bray:"Ana Bray (Mars)",werner:"Werner 99-40 (Tower, Nessus Barge)"},dn=function(e){return un[e]||e},pn=function(){var e=Object(j.a)(f.a.mark((function e(){var t,r,n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.vendorengrams.xyz/getVendorDrops?source=destiny-power-bars");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,n=Date.now(),Zt=a={data:r,updateTimestamp:n},e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hn=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zt){e.next=2;break}return e.abrupt("return",Zt);case 2:return er||(er=pn()),$t||($t=setInterval((function(){pn().catch((function(e){return console.warn("Error refreshing vendorengrams.xyz data",e)}))}),3e5)),e.abrupt("return",er);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bn={bungieApi:a,bungieAuth:c,ga:n,utils:i,vendors:s},mn=r(60),fn=r.n(mn),jn=function(){var e=Object(l.useState)(!1),t=Object(p.a)(e,2),r=t[0],n=t[1],a=Object(l.useState)(!1),c=Object(p.a)(a,2),i=c[0],s=c[1];if(i)return null;var u=Object(o.jsx)("button",{onClick:function(){return n(!0)},children:"(more details)"}),d=Object(o.jsx)("button",{onClick:function(){return n(!1)},children:"(less details)"}),h=Object(o.jsx)("button",{onClick:function(){return s(!0)},children:"(hide)"}),b=r?Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{children:"Redacted equippable items were found in your character or account inventories."}),Object(o.jsx)("p",{children:"Redacted items do not display their power level or item type in the data returned by the API, so we can not use them to calculate your character's maximum equippable power."}),Object(o.jsx)("p",{children:"These items are usually found within recently added content (raids, dungeons) and will be un-redacted soon by Bungie, usually at the next weekly reset."}),Object(o.jsx)("p",{children:"There is nothing we can do to make this data visible quicker, sorry!"}),Object(o.jsxs)("p",{children:['If you believe this to be an error (or your data seems "stuck"), you can try deleting and re-downloading your cached Destiny manifest by'," ",Object(o.jsx)("button",{onClick:function(){return re()},children:"clicking here to clear it"}),"."]}),Object(o.jsxs)("div",{className:fn.a.links,children:[d,h]})]}):Object(o.jsxs)(o.Fragment,{children:["Redacted items detected, maximum power displayed might not be accurate!"," ",u]});return Object(o.jsx)("div",{className:fn.a.redactedWarning,children:b})},vn=(r(197),r(198),r(14)),_n=r.n(vn),On=x()((function(e,t){Object(j.a)(f.a.mark((function r(){return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Re();case 3:r.sent?(e(!0),t(!1)):(e(!1),t(!0)),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0),e(!1),t(!0);case 12:case"end":return r.stop()}}),r,null,[[0,7]])})))()}),100),gn=x()((function(e,t,r,n){Object(j.a)(f.a.mark((function a(){var c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ne();case 3:if(!(c=a.sent).error){a.next=10;break}return console.error("Error fetching manifest:",c.error.message),n(!0),c.error instanceof K&&e(!0),"503"===c.error.message&&t(!0),a.abrupt("return");case 10:r(c.manifest),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(0),console.error(a.t0),n(!0);case 17:case"end":return a.stop()}}),a,null,[[0,13]])})))()}),500),xn=x()((function(e,t,r){var n=function(t){var r=Math.max.apply(Math,Object(b.a)(t.map((function(e){return e.overallPower})))),n=Math.max.apply(Math,Object(b.a)(t.map((function(e){return e.artifactData?e.artifactData.bonusPower:0})))),a=r+n;J.set({dimension1:"".concat(r),dimension2:"".concat(n),dimension3:"".concat(a)}),e(t)},a=nn();Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,cn(n);case 5:e.next=12;break;case 7:e.prev=7,e.t0=e.catch(2),e.t0 instanceof K&&t(!0),"503"===e.t0.message&&r(!0),console.error("Error fetching character data:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})))()}),500),wn=x()(function(){var e=Object(j.a)(f.a.mark((function e(t,r,n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=9;break}return e.prev=1,e.next=4,an(a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Error busting profile cache, but silently ignoring",e.t0);case 9:return e.abrupt("return",xn(t,r,n));case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),500),yn=function(e){var t=e.children,r=e.top,n=void 0!==r&&r;return Object(o.jsx)("div",{className:_n.a.App,children:Object(o.jsx)("div",{className:O()(_n.a.AppInner,Object(h.a)({},_n.a.top,n)),children:t})})},Sn=function(){var e=Object(l.useState)(je()),t=Object(p.a)(e,2),r=t[0],n=t[1],a=Object(l.useState)(ke()),c=Object(p.a)(a,2),i=c[0],s=c[1],u=Object(l.useState)(!1),d=Object(p.a)(u,2),b=d[0],m=d[1],f=Object(l.useState)(void 0),j=Object(p.a)(f,2),_=(j[0],j[1]),g=Object(l.useState)(!1),x=Object(p.a)(g,2),w=x[0],y=x[1],S=Object(l.useState)(!1),A=Object(p.a)(S,2),I=A[0],E=A[1],k=Object(l.useState)(!1),N=Object(p.a)(k,2),D=N[0],T=N[1],C=Object(l.useState)(nn()),P=Object(p.a)(C,2),R=P[0],M=P[1];W(H.FETCHING_CHARACTER_DATA_CHANGE,(function(){return M(nn())}));var B=Object(l.useState)(void 0),L=Object(p.a)(B,2),F=L[0],G=L[1],U=Object(l.useState)("Initialising..."),V=Object(p.a)(U,2),z=V[0],q=V[1];W(H.GET_MANIFEST,(function(){y(!1),q("Checking manifest version")})),W(H.LOAD_MANIFEST_DATA,(function(){return q("Loading manifest data")})),W(H.FETCH_MANIFEST_DATA,(function(){return q("Fetching manifest data from Bungie")})),W(H.PARSE_MANIFEST_DATA,(function(){return q("Processing manifest data")})),W(H.STORE_MANIFEST_DATA,(function(){return q("Saving manifest data")})),W(H.MANIFEST_DATA_READY,(function(){y(!1),q("Manifest ready")})),W(H.LOG_OUT,(function(){s(!1),n(!1)}));var Y="Manifest ready"===z;Object(l.useEffect)((function(){i||On(s,m)}),[i,s,m]),Object(l.useEffect)((function(){return gn(E,T,_,y)}),[E,T,_,y]),W(H.MANIFEST_FETCH_ERROR,(function(){gn(E,T,_,y)}));var K=Object(l.useState)(!1),Q=Object(p.a)(K,2),X=Q[0],Z=Q[1],$=Ce();Object(l.useEffect)((function(){i&&$&&!X&&(Z(!0),tn(G))}),[i,$,X,Z]),Object(v.a)((function(){i&&$&&!R&&xn(G,E,T)}),15e3),Object(l.useEffect)((function(){!i||F||R||I||xn(G,E,T)}),[i,F,R,I]);var ee=Object(l.useCallback)((function(e){J.event({category:"Platform",action:"Select platform",label:"Membership type: ".concat(e.membershipType)}),Pe(e)}),[]),te="";I?te=Object(o.jsxs)("span",{children:["Bungie API disabled.",Object(o.jsx)("br",{}),"Check"," ",Object(o.jsx)("a",{href:"https://www.bungie.net/en/Help/Article/13125",target:"_blank",rel:"noopener noreferrer",children:"Bungie's server and update status page"})," ","for more information"]}):D?te=Object(o.jsxs)("span",{children:["Bungie API unavailable.",Object(o.jsx)("br",{}),"Check"," ",Object(o.jsx)("a",{href:"https://www.bungie.net/en/Help/Article/13125",target:"_blank",rel:"noopener noreferrer",children:"Bungie's server and update status page"})," ","for more information"]}):b?te=Object(o.jsx)("span",{className:_n.a.statusAuthError,onClick:function(){return ge()},children:"Bungie.net authentication required"}):w?te=Object(o.jsxs)("span",{children:["Error loading manifest, if this persists try"," ",Object(o.jsx)("a",{href:"/",children:"refreshing the page"}),"!"]}):i?$?Y?F&&0!==F.length||(te=R?"Fetching character data...":"No character data"):te=z:te="Waiting for Destiny platform selection...":te="Authenticating...",window.characterData=F;var re=Object(l.useCallback)((function(){return F?F.map((function(e){return e.character.characterId})):[]}),[F]),ne=Object(l.useCallback)((function(e){return F&&F.length===e.length&&e.every((function(e){return F.some((function(t){return t.character.characterId===e}))}))&&F.every((function(t){return e.includes(t.character.characterId)}))}),[F]),ae=Object(l.useState)(void 0),ce=Object(p.a)(ae,2),ie=ce[0],se=ce[1],oe=Object(l.useState)(qr()),le=Object(p.a)(oe,2),ue=le[0],de=le[1],pe=Object(l.useCallback)((function(e){if(ie&&ie!==e){var t=ue&&ue.length>0?ue:re(),r=t.slice();r.splice(t.indexOf(ie),1,e),r.splice(t.indexOf(e),1,ie),Yr(r),de(r)}}),[ie,ue,de,re]),he=re();if(F&&F.length>0&&ue&&ue.length>0&&(ne(ue)?he=ue:de(void 0)),i&&F&&F.length>0){var be=F.some((function(e){return e.hasRedactedEquippableItems}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(yn,{top:!0,children:[Object(o.jsxs)("div",{className:_n.a.header,children:[Object(o.jsx)("button",{className:O()(_n.a.hardRefreshButton,Object(h.a)({},_n.a.disabled,R)),onClick:function(){wn(G,E,T,F)},children:"Refresh"}),Object(o.jsx)(Cr,{api:bn,onMembershipSelect:ee})]}),Object(o.jsx)("div",{className:_n.a.charactersContainer,children:Object(o.jsx)("div",{className:_n.a.characters,children:he.map((function(e){return F.find((function(t){return t.character.characterId===e}))})).map((function(e){return Object(o.jsx)(Tt,{data:e,onDragStart:function(){return se(e.character.characterId)},onDragEnd:function(){return se(void 0)},onDragDrop:function(){return pe(e.character.characterId)}},e.character.characterId)}))})}),be?Object(o.jsx)(jn,{}):null,te?Object(o.jsx)(fr,{children:te}):null,R?Object(o.jsx)(Rt,{}):null]}),Object(o.jsx)(sr,{})]})}if(b&&!r)return Object(o.jsxs)(yn,{children:[Object(o.jsx)(ur,{}),Object(o.jsx)(Sr,{}),Object(o.jsx)(sr,{})]});var me=[],fe=function(e,t,r){return me.push({label:e,status:t?"complete":r?"failed":"pending"})};return fe("Authenticated",i,b),fe("Loaded Character Data",!!F),fe("Loaded Destiny Manifest Defintions",Y,w),Object(o.jsxs)(yn,{children:[Object(o.jsx)(Cr,{api:bn,onMembershipSelect:ee}),Object(o.jsx)(hr,{withTopMargin:!0,items:me}),Object(o.jsx)(fr,{children:te}),Object(o.jsx)(sr,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(Object(o.jsx)(Sn,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},23:function(e,t,r){e.exports={interPowerBar:"InterPowerBar_interPowerBar__1irbI",min:"InterPowerBar_min__nPrv5",max:"InterPowerBar_max__23K0g",bar:"InterPowerBar_bar__1z25i",fillBar:"InterPowerBar_fillBar__2bwYr",barOverlay:"InterPowerBar_barOverlay___zQVM"}},25:function(e,t,r){e.exports={LoadingChecklist:"LoadingChecklist_LoadingChecklist__KbNL5",topMargin:"LoadingChecklist_topMargin__1ARfF",item:"LoadingChecklist_item__2_2Cl",status:"LoadingChecklist_status__1-PMx",complete:"LoadingChecklist_complete__1qfgG",pending:"LoadingChecklist_pending__3ykCd",failed:"LoadingChecklist_failed__2NRty"}},26:function(e,t,r){e.exports={lazyImage:"LazyImage_lazyImage__j4cxv",hidden:"LazyImage_hidden__sfsi5",overlay:"LazyImage_overlay__1Z9M2"}},33:function(e,t,r){e.exports={anchor:"FetchSpinner_anchor__2bpEe",spinner:"FetchSpinner_spinner__3uf-_",spin:"FetchSpinner_spin__3wMft",fetchSpinnerContainer:"FetchSpinner_fetchSpinnerContainer__2f9d4",spinnerSmall:"FetchSpinner_spinnerSmall__2pJsX"}},34:function(e,t,r){e.exports={socialLinks:"SocialLinks_socialLinks__18XFZ",link:"SocialLinks_link__3Z2Wj"}},35:function(e,t,r){e.exports={headerContainer:"Header_headerContainer__3M_mx",header:"Header_header__2XAj3",subHeader:"Header_subHeader__3Ap8f",author:"Header_author__17ihj"}},36:function(e,t,r){e.exports={loginContainer:"LoginPrompt_loginContainer__1DfGO",exampleImage:"LoginPrompt_exampleImage__3f80u",login:"LoginPrompt_login__r8eqR",loginButton:"LoginPrompt_loginButton__n1OHn"}},57:function(e,t,r){e.exports={kofiContainer:"KoFi_kofiContainer__1-NvR",link:"KoFi_link__mMabj"}},60:function(e,t,r){e.exports={redactedWarning:"RedactedWarning_redactedWarning__2FrKD",links:"RedactedWarning_links__17r-9"}},7:function(e,t,r){e.exports={hints:"PowerHints_hints__9HbgH",hint:"PowerHints_hint__2zx_C",dropHint:"PowerHints_dropHint__3lQ-N",worldDropHint:"PowerHints_worldDropHint__3M_Nv",legendaryWorldDropHint:"PowerHints_legendaryWorldDropHint__g_SSJ",powerfulHint:"PowerHints_powerfulHint__26w25",pinnacleHint:"PowerHints_pinnacleHint__c2cdM",separator:"PowerHints_separator__1_of2",hintExtra:"PowerHints_hintExtra__2TIGc",hintExtraInner:"PowerHints_hintExtraInner__2tEbw"}},87:function(e,t,r){e.exports={inlinePowerNumber:"Power_inlinePowerNumber__28Oqz"}},88:function(e,t,r){e.exports={buildStamp:"BuildStamp_buildStamp__16Chc"}},89:function(e,t,r){e.exports={footer:"Footer_footer__1G6Wy"}},9:function(e,t,r){e.exports={barWrapper:"PowerBar_barWrapper__2Er15",generalLabel:"PowerBar_generalLabel__3N-0q",specificLabel:"PowerBar_specificLabel__3OkJr",iconWrapper:"PowerBar_iconWrapper__1k9U_",icon:"PowerBar_icon__3zN_u",barContainer:"PowerBar_barContainer__KfIri",barLine:"PowerBar_barLine__Fc3BR",filledBar:"PowerBar_filledBar__3a32S",label:"PowerBar_label__32eba",power:"PowerBar_power__2ZVuC",max:"PowerBar_max__L5cvP",belowAverage:"PowerBar_belowAverage__2r-Dj",vaultOverlay:"PowerBar_vaultOverlay__39TWm",postmasterOverlay:"PowerBar_postmasterOverlay__2Ir6r",masterworkOverlay:"PowerBar_masterworkOverlay__2DcIk"}}},[[199,3,4]]]);
//# sourceMappingURL=main.d32900da.chunk.js.map